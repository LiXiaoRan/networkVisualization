webpackJsonp([1],{NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};a.d(i,"TEST_DATA_UPDATE_SUCCESS",function(){return Y}),a.d(i,"TEST_DATA_UPDATE_FAILED",function(){return J});var n=a("mvHQ"),r=a.n(n),s=a("7+uW"),o=a("Dd8w"),l=a.n(o),c=a("NYxO"),d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",{staticClass:"icon"},[e("font-awesome-icon",{attrs:{icon:[this.prefix,this.icon]}})],1),this._v(" "),e("span",{staticClass:"text"},[this._v(this._s(this.msgs))])])},staticRenderFns:[]};var h=a("VU/8")({props:["icon","msgs"],computed:{prefix:function(){return"joomla"==this.icon||"usb"==this.icon?"fab":"fas"}},ready:function(){}},d,!1,function(t){a("Zm2s")},"data-v-1a8ad6e4",null).exports,u=a("+G5l"),p=(a("mw3O"),a("vwbq")),g={data:function(){return{icon:"joomla",msgs:"多层网络",now_layout_type:null,layout_data:{},limit:5e3,start:0,end:1e9}},components:{AppTitle:h},mounted:function(){var t=this;t.now_layout_type="random";var e=new u.a;e.add({"布局":"随机布局"},"布局",["随机布局","椭圆布局","graphopt布局","多元尺度布局","网格布局","大图布局","分布式递归布局","层次化布局","环状RT树布局"]).onChange(function(e){switch(e){case"随机布局":t.now_layout_type="random",i("random");break;case"椭圆布局":t.now_layout_type="circle",i("circle");break;case"graphopt布局":t.now_layout_type="graphopt",i("graphopt");break;case"多元尺度布局":t.now_layout_type="mds",i("mds");break;case"网格布局":t.now_layout_type="grid",i("grid");break;case"大图布局":t.now_layout_type="lgl",i("lgl");break;case"分布式递归布局":t.now_layout_type="drl",i("drl");break;case"层次化布局":t.now_layout_type="sugiyama",i("sugiyama");break;case"环状RT树布局":t.now_layout_type="rt_circular",i("rt_circular")}}),document.getElementById("layContainer").appendChild(e.domElement);var a;a="random",t.getDataWithParams({where:{val:{start:t.start,end:t.end}},limit:t.limit,layout_type:a});var i=function(e){t.drawSwitchGraph(e)}},methods:{drawSwitchGraph:function(t){var e={layoutData:r()(this.layout_data),layout_type:t};CommunicateWithServer("post",e,"get-layout-data",this.drawGraph)},getDataWithParams:function(t){CommunicateWithServer("get",t,"cal-layout",this.drawGraph)},drawGraph:function(t){console.log(t),this.layout_data={links:t.links,nodes:t.nodes};var e=+new Date,a=50,i=50,n=70,r=70,s=p.select(".view-svg"),o=parseFloat(null===s.attr("width")?s.style("width"):s.attr("width")),l=parseFloat(null===s.attr("height")?s.style("height"):s.attr("height"));s.select("g")&&s.select("g").remove();var c=s.append("g"),d=p.scaleLinear().domain(p.extent(t.nodes,function(t){return t.x})).range([n,o-r]),h=p.scaleLinear().domain(p.extent(t.nodes,function(t){return t.y})).range([a,l-i]);c.append("g").selectAll("circle").data(t.nodes).enter().append("circle").attr("cx",function(t){return d(t.x)}).attr("cy",function(t){return h(t.y)}).attr("r",function(t){return Math.ceil(10*Math.random())}).attr("stroke",function(t){return"#fff"}).attr("stroke-width",function(t){return"1"}).attr("fill","#eee").attr("opacity",.6),c.append("g").selectAll("line").data(t.links).enter().append("line").attr("stroke",function(t){return"#fff"}).attr("stroke-width",function(t){return"1"}).attr("x1",function(t){return d(t.x1)}).attr("y1",function(t){return h(t.y1)}).attr("x2",function(t){return d(t.x2)}).attr("y2",function(t){return h(t.y2)});var u=+new Date;console.log("渲染时间 :"+(u-e)/1e3)}},watch:{}},m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"layout-panel"}},[e("app-title",{attrs:{icon:this.icon,msgs:this.msgs}}),this._v(" "),e("div",{staticClass:"view"},[e("svg",{staticClass:"view-svg"}),this._v(" "),e("div",{attrs:{id:"layContainer"}})])],1)},staticRenderFns:[]};var v=a("VU/8")(g,m,!1,function(t){a("ZwTL")},"data-v-5901ca95",null).exports,f=a("4kSj"),y=a.n(f),x=a("vwbq"),_={data:function(){return{icon:"usb",msgs:"节点树",currentPage:1,pageMax:50,nodesLength:300}},components:{AppTitle:h},methods:{HistogramInit:function(t,e){e.divWidth=e.divWidthh?e.divWidth:parseInt(y()("#"+t).css("width").split("px")[0]),e.divHeight=e.divHeight?e.divHeight:parseInt(y()("#"+t).css("height").split("px")[0]),this.margin={top:.03*e.divHeight,right:.07*e.divWidth,bottom:.08*e.divHeight,left:.07*e.divWidth},this.width=e.divWidth-this.margin.left-this.margin.right,this.height=e.divHeight-this.margin.top-this.margin.bottom,this.barPadding=1,this.xPadding=.05*this.width,this.yPadding=.05*this.height,this.svg=x.select("#"+t).append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).attr("class","mainNode");var a;this.xScale=x.scaleLinear().range([0,this.width/e.dictLength]).domain(x.range(e.dictLength)),this.yleftDownScale=x.scaleLinear().range([.1*this.height,this.height/2]).domain([x.max(e.data,function(t){return x.max(t)}),0]),this.yleftUpScale=x.scaleLinear().range([this.height/2.5,0]).domain([x.max(e.data,function(t){return x.max(t)}),0]),this.svgaxisLeftDown=this.svg.append("g").attr("class","axis").attr("transform","translate("+this.margin.left+","+(this.margin.top+this.height/2)+")").attr("id","svgaxisLeftDown").call(x.axisLeft(this.yleftDownScale).ticks(3,"s")).style("fill","#95a5a6"),this.svgaxisLeftUp=this.svg.append("g").attr("class","axis").attr("transform","translate("+this.margin.left+","+2*this.margin.top+")").attr("id","svgaxisRightUp").call(x.axisLeft(this.yleftUpScale).ticks(3,"s")).attr("fill","#95a5a6"),this.svg.selectAll(".axis text").attr("fill","#95a5a6").attr("font-size",11),this.svg.selectAll(".axis line").attr("stroke","#95a5a6"),this.svg.append("g");var i=this.svg.append("g").attr("id","rect").attr("transform","translate(0,"+this.margin.top+")");a=this,i.selectAll("Xrect").data(e.data).enter().append("rect").attr("x",function(t,i){return a.margin.left+i*(a.width/e.data.length)}).attr("y",function(t,i){var n=x.max(e.data,function(t){return t[0]});return 0===n?0:a.height-t[0]*a.height/(2.2*n)}).attr("width",function(t,i){return a.width/e.data.length>=5*a.barPadding?a.width/e.data.length-a.barPadding:a.width/e.data.length}).attr("height",function(t,i){var n=x.max(e.data,function(t){return t[0]});return 0===n?0:t[0]*a.height/(2.2*n)}).attr("opacity",.5).style("fill","#3F5765"),i.selectAll("Xrect").data(e.data).enter().append("rect").attr("x",function(t,i){return a.margin.left+i*(a.width/e.data.length)}).attr("y",function(t,e){return a.margin.top}).attr("width",function(t,i){return a.width/e.data.length>=5*a.barPadding?a.width/e.data.length-a.barPadding:a.width/e.data.length}).attr("height",function(t,i){var n=x.max(e.data,function(t){return t[1]});return 0===n?0:t[1]*a.height/(2.2*n)}).attr("opacity",.5).style("fill","#FF530D")},Histogram:function(){this.svg.append("g").attr("id","firstLine"),this.svg.selectAll(".domain").remove()},MainNodeInf:function(t){this.HistogramInit("Panel",{divHeight:150,dictLength:30,data:t})},HeatLineInit:function(t,e){e.divWidth=e.divWidth?e.divWidth:parseInt(y()("#"+t).css("width").split("px")[0]),e.divHeight=e.divHeight?e.divHeight:parseInt(y()("#"+t).css("height").split("px")[0]),this.margin={top:.03*e.divHeight,right:.07*e.divWidth,bottom:.08*e.divHeight,left:.07*e.divWidth},this.width=e.divWidth-this.margin.left-this.margin.right,this.height=e.divHeight-this.margin.top-this.margin.bottom,this.barPadding=1,this.xPadding=.05*this.width,this.yPadding=.05*this.height,this.svg=x.select("#"+t).append("svg").attr("width",this.width+this.margin.left+this.margin.right).attr("height",2*this.height+this.margin.top+this.margin.bottom).attr("id",e.num).attr("class","relatedNodes");var a=this;1===e.dictLength&&(e.data.push([0,0]),e.dictLength=e.data.length),this.xScale=x.scaleLinear().range([0,this.width/e.dictLength]).domain(x.range(e.dictLength)),this.yleftDownScale=x.scaleLinear().range([.1*this.height,this.height/2]).domain([x.max(e.data,function(t){return t[0]}),0]),this.yleftUpScale=x.scaleLinear().range([this.height/2.5,0]).domain([x.max(e.data,function(t){return t[1]}),0]),this.yrightScale=x.scaleLinear().range([a.margin.top,this.height]).domain([1.3*x.max(e.data,function(t){return x.max(t)}),0]),this.svgaxisRight=this.svg.append("g").attr("class","axis").attr("transform","translate("+(this.margin.left+this.width)+","+this.margin.top+")").attr("id","svgaxisRightUp").call(x.axisRight(this.yrightScale).ticks(2,"s")),x.selectAll(".axis text").attr("fill","#95a5a6").attr("font-size",8),x.selectAll(".axis line").attr("stroke","#95a5a6");var i=x.area().x(function(t,e){return a.xScale(e)}).y0(a.yrightScale(0)).y1(function(t,e){return a.yrightScale(t[0])}),n=x.area().x(function(t,e){return a.xScale(e)}).y0(a.yrightScale(0)).y1(function(t,e){return a.yrightScale(0)-a.yrightScale(t[1])+a.yrightScale(0)}),r=this.svg.append("g").attr("id","firstLine");r.selectAll("Xline").data([e.data]).enter().append("path").attr("fill","#45BF55").attr("stroke","none").attr("stroke-width",2).attr("opacity",.5).attr("d",i).attr("transform","translate("+this.margin.left+",0)"),r.selectAll("Xline").data([e.data]).enter().append("path").attr("fill","steelblue").attr("stroke","none").attr("stroke-width",3).attr("opacity",.5).attr("d",n).attr("transform","translate("+this.margin.left+",0)"),this.svg.append("circle").attr("cx",a.xScale(0)-10).attr("cy",a.yrightScale(0)).attr("r",3).attr("fill","grey").attr("transform","translate("+this.margin.left+",0)"),this.svg.append("line").attr("x1",a.xScale(0)-10).attr("y1",a.yrightScale(0)).attr("x2",a.width).attr("y2",a.yrightScale(0)).attr("stroke","grey").attr("transform","translate("+this.margin.left+",0)"),this.svg.append("text").attr("x",a.xScale(0)+10).attr("y",2*a.height).attr("font-size",12).attr("fill","#95a5a6").style("text-anchor","start").text(e.id),x.selectAll(".domain").remove()},HeatLineInf:function(t,e){for(var a=0;a<e.length;a++)this.HeatLineInit("Panel",{divHeight:30,dictLength:e[a].length,data:e[a],id:t[a],num:a+1});this.Paginate(e.length),x.select(".previous").on("click",this.prev),x.select(".next").on("click",this.next)},Paginate:function(t){var e=t,a=Math.floor(e/6)+1;x.select(".page").attr("nodes-length",e),x.select(".page").attr("page-max",a);if(t>7){document.getElementById("Panel").innerHTML+="<div class = 'pager' align='right' style='margin: 10px 40px'><button class = 'previous' v-on:click = 'this.prev()' style='margin: 10px;color: whitesmoke;background-color: #9864CC; border-radius:10px; border:0;'>← Prev</button><button class = 'next'  v-on:click = 'this.next()'  style='margin: 10px;color: whitesmoke;background-color: #9864CC; border-radius:10px; border:0;'>Next →</button></div>";for(var i=7;i<=t;i++)document.getElementById(""+i).style.display="none"}},next:function(){var t=x.select(".page").attr("page-max"),e=x.select(".page").attr("current-page"),a=x.select(".page").attr("nodes-length");if(e++,x.select(".page").attr("current-page",e),e>t)return e=t,void x.select(".page").attr("current-page",e);x.select(".previous").classed("disabled",!1);for(var i=1;i<=a;i++)document.getElementById(""+i).style.display=6*(e-1)<i&&i<=6*e?"block":"none";e===t&&x.select(".next").classed("disabled",!0)},prev:function(){var t=x.select(".page").attr("current-page"),e=x.select(".page").attr("nodes-length");if(t--,x.select(".page").attr("current-page",t),t<1)return t=1,void x.select(".page").attr("current-page",t);x.select(".next").classed("disabled",!1);for(var a=1;a<=e;a++)document.getElementById(""+a).style.display=6*(t-1)<a&&a<=6*t?"block":"none";1===t&&x.select(".previous").classed("disabled",!0)}},mounted:function(){for(var t=[],e=0;e<30;e++){var a=[Math.floor(50*Math.random()),Math.floor(50*Math.random())];t.push(a)}this.MainNodeInf(t);for(var i=[],n=0;n<8;n++){for(var r=[],s=0;s<100;s++){var o=[Math.floor(10*Math.random()),Math.floor(10*Math.random())];r.push(o)}i.push(r)}this.HeatLineInf(["10.59.212.181","220.181.157.93","101.226.161.183","106.38.199.36","140.207.197.241","106.38.199.36","10.59.212.142","10.66.120.187","10.66.204.123","10.59.212.181","106.38.199.36","10.59.212.142","10.66.120.187","10.66.204.123","10.59.212.181"],i)}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"nodetree-panel"}},[e("app-title",{attrs:{icon:this.icon,msgs:this.msgs}}),this._v(" "),e("div",{staticClass:"view",attrs:{id:"Panel"}}),this._v(" "),e("div",{staticClass:"page",attrs:{"page-max":"50","current-page":"1","nodes-length":"300"}})],1)},staticRenderFns:[]};var k=a("VU/8")(_,w,!1,function(t){a("ZohH")},"data-v-12eb6b95",null).exports,A=a("Um2a"),b=a("vwbq"),T={data:function(){return{icon:"chart-line",msgs:"时间轴",items_s:[{text:"最近一天",value:"1"},{text:"最近一周",value:"7"},{text:"最近一月",value:"30"}],selected_s:"1",items_g:[{text:"15分钟",value:"15"},{text:"30分钟",value:"30"},{text:"60分钟",value:"60"},{text:"自定义",value:"自定义"}],selected_g:"15",networkData:null,loadedData:null}},components:{AppTitle:h},watch:{loadedData:function(){this.drawTimeLine(this.networkData)}},methods:{drawTimeLine:function(t){var e=b.select(this.$el).select(".view-svg"),a=parseFloat(null===e.attr("width")?e.style("width"):e.attr("width")),i=parseFloat(null===e.attr("height")?e.style("height"):e.attr("height"));this.TimeLine=new A.a({view:e,width:a,height:i,timeChangeHandler:this.timeChangeHandler,timeData:t})},getDataWithParams:function(t){var e=this;CommunicateWithServer("get",t,"recent-data",function(t){console.log(t);var a=[];t.data.forEach(function(e){for(var i={},n=0;n<t.fields.length;n++)i[t.fields[n]]=e[n];a.push(i)}),console.log(t),e.networkData=a,e.loadedData=Math.random()})},timeChangeHandler:function(t){console.log("timeChange~~",t),this.emitEvent("time_change",t)},emitEvent:function(t,e){console.log("hello ~~ emit event ",t),this.$emit(t,e)}},mounted:function(){this.getDataWithParams({timeRange:"1day"})}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"timeline-panel"}},[a("app-title",{attrs:{icon:t.icon,msgs:t.msgs}}),t._v(" "),a("div",{attrs:{id:"filter"}},[a("label",{attrs:{for:"timeSpan"}},[t._v("全局时间跨度：")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selected_s,expression:"selected_s"}],attrs:{id:"timeSpan"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selected_s=e.target.multiple?a:a[0]}}},t._l(t.items_s,function(e){return a("option",{domProps:{value:e.value}},[t._v(t._s(e.text))])})),t._v(" "),a("label",{attrs:{for:"timeGranularity"}},[t._v("时间粒度：")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selected_g,expression:"selected_g"}],attrs:{id:"timeGranularity"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selected_g=e.target.multiple?a:a[0]}}},t._l(t.items_g,function(e){return a("option",{domProps:{value:e.value}},[t._v(t._s(e.text))])})),t._v(" "),t._m(0),t._v(" "),a("button",{attrs:{id:"pause",value:"1"}},[t._v("暂停动画")])]),t._v(" "),a("div",{staticClass:"view"},[t._m(1),t._v(" "),a("svg",{staticClass:"view-svg"},[a("g",{staticClass:"timeline_detail"}),t._v(" "),a("g",{staticClass:"container"})])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("时刻指示器："),e("span",{attrs:{id:"currentTime"}},[this._v("2016/8/15 0:00:00")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left-indicator"},[e("span",{staticClass:"selected"},[this._v("选中时段流量")]),this._v(" "),e("span",{staticClass:"global"},[this._v("全局时段流量")])])}]};var D=a("VU/8")(T,S,!1,function(t){a("SdDz")},"data-v-335c962a",null).exports,C=a("vwbq"),P={data:function(){return{icon:"filter",msgs:"二级过滤器",span1:"主机",span2:"交换机",span3:"服务器",span4:"致瘫",span5:"控制",span6:"正常",nodeType:[],nodeAttr:[],items:[{text:"总流量",value:"总流量"},{text:"流入量",value:"流入量"},{text:"流出量",value:"流出量"}],selected:"总流量"}},components:{AppTitle:h},methods:{drawHistogram:function(t,e){var a=C.select(this.$el),i=0,n=0,r=.9*+a.select(".filtergraph").style("width").split("px")[0],s=.5*+a.select(".filtergraph").style("height").split("px")[0],o=.05*+r,l=C.scaleBand().rangeRound([0,r],.1).domain(t.map(function(t){return t[0]})).rangeRound([0,r],.1),c=C.scaleLinear().domain([C.max(t,function(t){return t[1]}),0]).range([0,s]),d=C.scaleLinear().domain([0,e]).range([0,r]),h=C.brushX().extent([[0,0],[r,s]]).on("end",function(){var e=C.brushSelection(this).map(d.invert);i=Math.round(e[0]),n=Math.round(e[1]),console.log(t.slice(i,n))}),u=C.select("#barchart").attr("width",r+2*o).attr("height",s+o+o).append("g").attr("id","yaxis").attr("transform","translate("+o+","+o+")").call(C.axisLeft().scale(c).ticks(3));C.select("#yaxis").select("path").remove(),C.select("#yaxis").selectAll(".tick").select("line").remove(),C.select("#yaxis").selectAll(".tick").selectAll("text").attr("transform","translate("+.8*o+",0)").attr("fill","#95a5a6");var p=o+10;C.select("#barchart").append("g").selectAll("rect").data(t).enter().append("rect").attr("width",l.bandwidth()).attr("height",function(e,a){return e[1]*s/C.max(t,function(t){return t[1]})}).attr("x",function(t){return d(t[0])}).attr("y",function(e,a){return s-e[1]*s/C.max(t,function(t){return t[1]})}).attr("transform","translate("+p+","+o+")").style("fill","rgb(31,165,218)").style("stroke","rgb(48,50,67)"),u.append("g").attr("class","brush").call(h)}},mounted:function(){for(var t=[],e=0;e<50;e++){var a=Math.floor(500*Math.random());t.push([e,a])}this.drawHistogram(t,50)},watch:{nodeType:function(t){console.log(t)},nodeAttr:function(t){console.log(t)},selected:function(t){console.log(t)}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"filter-panel"}},[a("app-title",{attrs:{icon:t.icon,msgs:t.msgs}}),t._v(" "),a("div",{staticClass:"filter1"},[a("span",{staticClass:"filtermsg"},[t._v("节点类型")]),t._v(" "),a("div",{staticClass:"fcheckbox"},[a("div",{staticClass:"select1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nodeType,expression:"nodeType"}],attrs:{type:"checkbox",value:"主机",id:"node1"},domProps:{checked:Array.isArray(t.nodeType)?t._i(t.nodeType,"主机")>-1:t.nodeType},on:{change:function(e){var a=t.nodeType,i=e.target,n=!!i.checked;if(Array.isArray(a)){var r=t._i(a,"主机");i.checked?r<0&&(t.nodeType=a.concat(["主机"])):r>-1&&(t.nodeType=a.slice(0,r).concat(a.slice(r+1)))}else t.nodeType=n}}}),a("label",{attrs:{for:"node1"}}),a("span",[t._v(t._s(t.span1))])]),t._v(" "),a("div",{staticClass:"select2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nodeType,expression:"nodeType"}],attrs:{type:"checkbox",value:"交换机",id:"node2"},domProps:{checked:Array.isArray(t.nodeType)?t._i(t.nodeType,"交换机")>-1:t.nodeType},on:{change:function(e){var a=t.nodeType,i=e.target,n=!!i.checked;if(Array.isArray(a)){var r=t._i(a,"交换机");i.checked?r<0&&(t.nodeType=a.concat(["交换机"])):r>-1&&(t.nodeType=a.slice(0,r).concat(a.slice(r+1)))}else t.nodeType=n}}}),a("label",{attrs:{for:"node2"}}),a("span",[t._v(t._s(t.span2))])]),t._v(" "),a("div",{staticClass:"select3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nodeType,expression:"nodeType"}],attrs:{type:"checkbox",value:"服务器",id:"node3"},domProps:{checked:Array.isArray(t.nodeType)?t._i(t.nodeType,"服务器")>-1:t.nodeType},on:{change:function(e){var a=t.nodeType,i=e.target,n=!!i.checked;if(Array.isArray(a)){var r=t._i(a,"服务器");i.checked?r<0&&(t.nodeType=a.concat(["服务器"])):r>-1&&(t.nodeType=a.slice(0,r).concat(a.slice(r+1)))}else t.nodeType=n}}}),a("label",{attrs:{for:"node3"}}),a("span",[t._v(t._s(t.span3))])])])]),t._v(" "),a("div",{staticClass:"filter2"},[a("span",{staticClass:"filtermsg"},[t._v("节点属性")]),t._v(" "),a("div",{staticClass:"fcheckbox"},[a("div",{staticClass:"select1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nodeAttr,expression:"nodeAttr"}],attrs:{type:"checkbox",value:"致瘫",id:"node4"},domProps:{checked:Array.isArray(t.nodeAttr)?t._i(t.nodeAttr,"致瘫")>-1:t.nodeAttr},on:{change:function(e){var a=t.nodeAttr,i=e.target,n=!!i.checked;if(Array.isArray(a)){var r=t._i(a,"致瘫");i.checked?r<0&&(t.nodeAttr=a.concat(["致瘫"])):r>-1&&(t.nodeAttr=a.slice(0,r).concat(a.slice(r+1)))}else t.nodeAttr=n}}}),a("label",{attrs:{for:"node4"}}),a("span",[t._v(t._s(t.span4))])]),t._v(" "),a("div",{staticClass:"select2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nodeAttr,expression:"nodeAttr"}],attrs:{type:"checkbox",value:"控制",id:"node5"},domProps:{checked:Array.isArray(t.nodeAttr)?t._i(t.nodeAttr,"控制")>-1:t.nodeAttr},on:{change:function(e){var a=t.nodeAttr,i=e.target,n=!!i.checked;if(Array.isArray(a)){var r=t._i(a,"控制");i.checked?r<0&&(t.nodeAttr=a.concat(["控制"])):r>-1&&(t.nodeAttr=a.slice(0,r).concat(a.slice(r+1)))}else t.nodeAttr=n}}}),a("label",{attrs:{for:"node5"}}),a("span",[t._v(t._s(t.span5))])]),t._v(" "),a("div",{staticClass:"select3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.nodeAttr,expression:"nodeAttr"}],attrs:{type:"checkbox",value:"正常",id:"node6"},domProps:{checked:Array.isArray(t.nodeAttr)?t._i(t.nodeAttr,"正常")>-1:t.nodeAttr},on:{change:function(e){var a=t.nodeAttr,i=e.target,n=!!i.checked;if(Array.isArray(a)){var r=t._i(a,"正常");i.checked?r<0&&(t.nodeAttr=a.concat(["正常"])):r>-1&&(t.nodeAttr=a.slice(0,r).concat(a.slice(r+1)))}else t.nodeAttr=n}}}),a("label",{attrs:{for:"node6",id:"node6label"}}),a("span",{attrs:{id:"node6span"}},[t._v(t._s(t.span6))])])])]),t._v(" "),a("div",{staticClass:"filtergraph"},[a("span",{staticClass:"filtermsg-0"},[t._v("节点数量")]),t._v(" "),a("span",{staticClass:"filtermsg-1"},[t._v("类型")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],staticClass:"filtermsg-2",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selected=e.target.multiple?a:a[0]}}},t._l(t.items,function(e){return a("option",{domProps:{value:e.value}},[t._v(t._s(e.text))])})),t._v(" "),a("div",{attrs:{id:"svgdiv"}},[a("svg",{attrs:{id:"barchart"}})])])],1)},staticRenderFns:[]};var H={data:function(){return{message:"Hello World :)",isSuccess:!1,isFailed:!1,httpData:{demoMysql:null,demoPerson:null,postDemoPerson:null},paramsMsg:""}},components:{AppNetwork:v,AppNodeTree:k,AppTimeLine:D,AppFilter:a("VU/8")(P,E,!1,function(t){a("uog6")},"data-v-a2882756",null).exports},computed:{privateTestData:{get:function(){return this.$store.state.testData},set:function(t){this.updateTestData(t)}},testDataUpdateStatus:function(){return this.$store.state.testDataUpdateStatus}},watch:{testDataUpdateStatus:function(t){this.CommonsConfig.debug&&(console.log(t),this.isSuccess=this.VuexUtils.isStatusEqual(t,this.VuexMutations.TEST_DATA_UPDATE_SUCCESS),this.isFailed=this.VuexUtils.isStatusEqual(t,this.VuexMutations.TEST_DATA_UPDATE_FAILED))}},methods:l()({},Object(c.b)(["removeAllSubgraph"]),{getDemoMysql:function(){var t=this;this.$http.get("/api/demo-mysql").then(function(e){window.test_res=e.body,t.httpData.demoMysql=e.body},function(e){t.httpData.demoMysql=e.body})},getDemoPerson:function(){var t=this;this.$http.get("/api/demo-person").then(function(e){t.httpData.demoPerson=e.body},function(e){t.httpData.demoPerson=e.body})},postDemoPerson:function(){var t=this;this.$http.post("/api/demo-person",{name:"name-"+Math.random(),sex:["F","M"][~~(2*Math.random())],description:"some desc -"+Math.random()}).then(function(e){t.httpData.postDemoPerson=e.body},function(e){t.httpData.postDemoPerson=e.body})},handleTimeChange:function(t){console.log("index vue!! hanle time change~~",t),this.paramsMsg={where:{start_time:{start:t[0],end:t[1]}},limit:5e3}}}),mounted:function(){}},L={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"App"}},[e("app-network",{attrs:{"params-msg":this.paramsMsg}}),this._v(" "),e("app-node-tree"),this._v(" "),e("app-time-line",{on:{time_change:this.handleTimeChange}}),this._v(" "),e("app-filter")],1)},staticRenderFns:[]};var M=a("VU/8")(H,L,!1,function(t){a("O/Vb")},"data-v-1a23c278",null).exports,I=a("/ocq");s.a.use(I.a);var U=new I.a({mode:"history"}),F=a("C/JF"),W=a("fhbW"),B=a("DfMW"),N=a("1e6/"),R="http://127.0.0.1:22333/",$=a("mtWM");function q(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function V(t,e,a,i,n){a&&(a=function t(e){for(var a in e)null===e[a]&&delete e[a],"string"===q(e[a])?e[a]=e[a].trim():"object"===q(e[a])?e[a]=t(e[a]):"array"===q(e[a])&&(e[a]=t(e[a]));return e}(a)),$({method:t,url:R+e,data:"POST"===t||"PUT"===t?a:null,params:"GET"===t||"DELETE"===t?a:null,baseURL:R,withCredentials:!1}).then(function(t){t.data?i&&i(t.data):n?n(t.data):window.alert("error: "+r()(t.data))}).catch(function(t){var e=t.response;t&&console.log("api error, HTTP CODE: "+e)})}var O,G={get:function(t,e,a,i){return V("GET",t,e,a,i)},post:function(t,e,a,i){return V("POST",t,e,a,i)},put:function(t,e,a,i){return V("PUT",t,e,a,i)},delete:function(t,e,a,i){return V("DELETE",t,e,a,i)}},z=a("bOdI"),j=a.n(z),Z={isStatusEqual:function(t,e){return!(!t||!e)&&(e=""+e,(t=""+t).split("@Time:")[0]===e.split("@Time:")[0])},setStatus:function(t,e,a){for(var i=e.split("."),n=i.pop(),r=t.status,s=0;s<i.length;s++){var o=i[s];r.hasOwnProperty(o)&&(r=r[o])}r.hasOwnProperty(n)&&(r[n]=a+"@Time:"+(new Date).toLocaleString()+"@Random: "+~~(Math.random()*Math.pow(10,8)))}},X=Z,Y="TEST_DATA_UPDATE_SUCCESS",J="TEST_DATA_UPDATE_FAILED";s.a.use(c.a),s.a.prototype.VuexUtils=X,s.a.prototype.VuexMutations=i;var Q=(O={},j()(O,Y,function(t,e){t.testData=e,X.setStatus(t,"testData.update",Y)}),j()(O,J,function(t){X.setStatus(t,"testData.update",J)}),O),K=new c.a.Store({strict:!0,state:{testData:null,status:{testData:{update:null}}},mutations:Q});F.c.add(B.a,B.b,W.a,W.b),s.a.component("font-awesome-icon",N.a),s.a.config.productionTip=!1,s.a.prototype.$api=G,window.$=y.a;window.CommunicateWithServer=function(t,e,a,i){e=r()(e),y.a.ajax({type:t,url:a,data:{params:e},dataType:"json",success:function(t){i(t)},error:function(t){i(t)}})},new s.a({el:"#app",router:U,store:K,components:{App:M},template:"<App/>"})},"O/Vb":function(t,e){},SdDz:function(t,e){},Um2a:function(t,e,a){"use strict";(function(t){var i=a("Zrlr"),n=a.n(i),r=a("wxAW"),s=a.n(r),o=a("vwbq"),l=function(){function e(t){n()(this,e);this.view=t.view,this.viewWidth=t.width,this.viewHeight=t.height,this.timeChangeHandler=t.timeChangeHandler,this.timeData=t.timeData,this.drawView(this.view)}return s()(e,[{key:"drawView",value:function(e){var a=this.timeData;console.log(a);var i=this.timeChangeHandler,n=65,r=30,s=.6*this.viewHeight,l=20,c=this.viewWidth-n-r,d=.4*this.viewHeight-l,h={},u=a[0].start_time,p=a[0].start_time;a.forEach(function(t){if(t.start_time<u&&(u=t.start_time),t.start_time>p&&(p=t.start_time),h[t.start_time.substring(0,14)]){var e=+t.val;h[t.start_time.substring(0,14)]+=e}else{var a=+t.val;h[t.start_time.substring(0,14)]=a}}),console.log(h);var g=u,m=p;g=O(g),m=O(m),g=new Date(g),m=new Date(m);var v,f=o.scaleTime().domain([g,m]).rangeRound([0,c]),y=o.scaleTime().rangeRound([0,c]),x=o.scaleLinear().range([d,0]).domain([0,500]),_=o.scaleLinear().range([d,0]),w=o.axisLeft().scale(x).ticks(3).tickSize(2),k=e.select(".container").attr("transform","translate("+n+", "+s+")"),A=e.select(".timeline_detail").attr("transform","translate("+n+", "+.18*this.viewHeight+")"),b=[];for(var T in h){var S=O(T);S=new Date(S);var D=h[T];b.push({time:S,flow:D})}function C(){k.selectAll("g").remove(),e.selectAll("defs").remove();for(var t=document.getElementById("timeSpan").value,a=[],i=void 0,n=b,r=0;r<n.length;r++){0===r&&(i=n[r].time.valueOf());var s=24*t*60*60*1e3,l=n[r].time.valueOf();if(!(Math.abs(l-i)<=s))break;a.push(n[r])}f.domain([a[0].time,a[a.length-1].time]),e.append("defs").append("clipPath").attr("id","clip").append("rect").attr("width",c).attr("height",d);var h=o.area().curve(o.curveBasis).x(function(t){return f(t.time)}).y0(d).y1(function(t){return x(Math.sqrt(t.flow))});k.append("g").attr("class","area").append("path").datum(a).attr("d",h).attr("fill","#2B516C");var u=k.append("g").attr("class","axis axis--grid").attr("transform","translate(0,"+d+")").call(o.axisBottom(f).ticks(o.timeHour,1).tickSize(-d).tickFormat(function(){return null}));u.selectAll("path").attr("stroke","gray").attr("stroke-opacity",.1),u.selectAll("line").attr("stroke","gray").attr("stroke-opacity",.1);var p=k.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+d+")").call(o.axisBottom(f).ticks(o.timeHour.every(3)).tickPadding(0)).attr("text-anchor",null);p.selectAll("text").attr("x",-20).attr("y",10).attr("fill","#95a5a6"),p.selectAll("line").attr("stroke","gray").attr("stroke-opacity",.1),p.selectAll("path").attr("stroke","gray").attr("stroke-opacity",.1);var g=k.append("g").attr("class","y axis").attr("transform","translate(0,0)").call(o.axisLeft().scale(x).ticks(3).tickSize(2));g.selectAll("text").attr("fill","#95a5a6"),g.selectAll("line").attr("stroke","gray").attr("stroke-opacity",.1),g.selectAll("path").attr("stroke","gray").attr("stroke-opacity",.1),k.append("g").attr("class","brush").call(o.brushX().extent([[0,0],[c,d]]).on("end",q))}b.sort((v="time",function(t,e){var a=t[v],i=e[v];return a-i})),C(),t("#timeSpan").change(function(){C()}),t("#pause").click(function(){1===parseInt(document.getElementById("pause").value)?$():function(){parseInt(o.select(".brush-detail").select(".selection").attr("x"))+U+U>=c&&o.select(".brush-detail").call(M.move,[0,U]);B=setInterval(N,5e3,o.now()),t("#pause").val(1),t("#pause").text("暂停动画")}()});var P=o.area().curve(o.curveBasis).x(function(t){return y(t.time)}).y0(d).y1(function(t){return _(Math.sqrt(t.flow))});y.domain(f.domain()),_.domain(x.domain()),A.append("g").attr("class","area-detail").append("path").datum(b).attr("clip-path","url(#clip)").attr("d",P).attr("fill","#2B516C");var E=A.append("g").attr("class","axis axis--grid").attr("transform","translate(0,"+d+")").call(o.axisBottom(y).ticks(o.timeHour,1).tickSize(-d).tickFormat(function(){return null}));E.selectAll("line").attr("stroke","gray").attr("stroke-opacity",.1),E.selectAll("path").attr("stroke","gray").attr("stroke-opacity",.1);var H=A.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+d+")").call(o.axisBottom(y).ticks(o.timeHour.every(3)).tickPadding(0)).attr("text-anchor",null);H.selectAll("text").attr("x",-20).attr("y",10).attr("fill","#95a5a6"),H.selectAll("line").attr("stroke","gray").attr("stroke-opacity",.1),H.selectAll("path").attr("stroke","gray").attr("stroke-opacity",.1);var L=A.append("g").attr("class","y axis").attr("transform","translate(0,0)").call(w);L.selectAll("text").attr("fill","#95a5a6"),L.selectAll("line").attr("stroke","gray").attr("stroke-opacity",.1),L.selectAll("path").attr("stroke","gray").attr("stroke-opacity",.1);var M=o.brushX(),I=document.getElementById("timeGranularity").value,U=R(I);function F(){if("自定义"===(I=document.getElementById("timeGranularity").value))return!1;U=R(I);var t=parseInt(o.select(".brush-detail").select(".selection").attr("x")),e=0;e=isNaN(t)?(t=0)+U:t+U,console.log(t,e),o.select(".brush-detail").call(M.move,[t,e])}A.append("g").attr("class","brush-detail").call(M.extent([[0,0],[c,d]]).on("end.det",function(){if(!o.event.selection)return;console.log("dddddd");var e=o.event.selection,a=y.invert(e[0]);t("#currentTime").html((n=a,r=n.getFullYear(),s=n.getMonth()+1,l=n.getDate(),c=n.getHours(),d=n.getMinutes(),h=n.getSeconds(),r+"/"+s+"/"+l+" "+V(c)+":"+V(d)+":"+V(h)));var n,r,s,l,c,d,h;var u=y.invert(e[1])-a,p=Math.round(u/1e3/60);if(15!==p&&30!==p&&60!==p)for(var g=document.getElementById("timeGranularity").getElementsByTagName("option"),m=0;m<g.length;m++)if("自定义"===g[m].value){g[m].selected=!0,I="自定义";break}var v=o.event.selection.map(f.invert),x=[];x[0]=G(v[0]),x[1]=G(v[1]),window.testTime=x,i(x)})).call(M.move,[0,U]),t("#timeGranularity").change(function(){F()});var W=0,B=setInterval(N,1500,o.now());function N(){var t=parseInt(o.select(".brush-detail").select(".selection").attr("x")),e=0;"自定义"===I&&(W=parseInt(o.select(".brush-detail").select(".selection").attr("width")),U=W),isNaN(t)?(t=0,e=0,U=0):e=t+U,o.select(".brush-detail").call(M.move,[t+U,e+U]),e+U>=c&&(o.select(".brush-detail").call(M.move,[c-U,c]),$())}function R(t){var e=y.invert(0).valueOf()+60*t*1e3;return y(new Date(e))-0}function $(){clearInterval(B),t("#pause").val(0),t("#pause").text("播放动画")}function q(){if(o.event.sourceEvent){if(!o.event.selection)return y.domain(f.domain()),A.select("path").attr("d",P),A.select(".axis--x").call(o.axisBottom(y).ticks(o.timeHour.every(3)).tickPadding(0)),void A.select(".axis--grid").call(o.axisBottom(y).ticks(o.timeHour,1).tickSize(-d).tickFormat(function(){return null}));var t=o.event.selection.map(f.invert),e=t.map(o.timeHour.round);y.domain([e[0],e[1]]),A.select("path").attr("d",P),A.select(".axis--x").call(o.axisBottom(y).ticks(o.timeHour.every(1)).tickPadding(0)),A.select(".axis--grid").call(o.axisBottom(y).ticks(o.timeHour,1).tickSize(-d).tickFormat(function(){return null})),F(),e[0]>=e[1]&&(e[0]=o.timeHour.floor(t[0]),e[1]=o.timeHour.floor(e[0])),o.select(this).transition().call(o.event.target.move,e.map(f))}}function V(t){return t>9?t+"":"0"+t}function O(t){return t.substring(0,4)+"-"+t.substring(4,6)+"-"+t.substring(6,8)+" "+t.substring(8,10)+":"+t.substring(10,12)+":"+t.substring(12,14)}function G(t){var e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),n=t.getHours(),r=t.getMinutes(),s=t.getSeconds(),o="";return o=(o=(o=o+e+(a>=10?a:"0"+a)+(i>=10?i:"0"+i))+(n>=10?n:"0"+n)+(r>=10?r:"0"+r))+(s>=10?s:"0"+s)+"000000",console.log(o),o}$()}}]),e}();e.a=l}).call(e,a("4kSj"))},Zm2s:function(t,e){},ZohH:function(t,e){},ZwTL:function(t,e){},uog6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f084eba5e2f27c5428d9.js.map